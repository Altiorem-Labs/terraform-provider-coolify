# coolify_environment

Manages a Coolify environment resource. Environments in Coolify are containers within projects that organize your applications by deployment stage (e.g., development, staging, production).

> **Note**: Due to Coolify API limitations, environments cannot be updated after creation. Any changes to environment configuration will require destroying and recreating the environment.

## Example Usage

### Basic Environment

```hcl
resource "coolify_project" "webapp" {
  name = "webapp-project"
}

resource "coolify_environment" "production" {
  project_id = coolify_project.webapp.id
  name       = "production"
}
```

### Multiple Environments

```hcl
resource "coolify_project" "api_service" {
  name        = "api-service"
  description = "Main API service"
}

resource "coolify_environment" "development" {
  project_id = coolify_project.api_service.id
  name       = "development"
}

resource "coolify_environment" "staging" {
  project_id = coolify_project.api_service.id
  name       = "staging"
}

resource "coolify_environment" "production" {
  project_id = coolify_project.api_service.id
  name       = "production"
}
```

### Using Output Values

```hcl
resource "coolify_project" "frontend" {
  name = "frontend-app"
}

resource "coolify_environment" "prod" {
  project_id = coolify_project.frontend.id
  name       = "production"
}

output "environment_id" {
  value = coolify_environment.prod.id
}
```

## Argument Reference

The following arguments are supported:

* `project_id` - (Required) The ID of the project to create the environment in. This must be a valid project UUID from an existing `coolify_project` resource.
* `name` - (Required) The name of the environment. Must be unique within the project.

## Attribute Reference

In addition to all arguments above, the following attributes are exported:

* `id` - The unique identifier (UUID) for the environment. This is automatically generated by Coolify.

## Import

Environments can be imported using their UUID:

```bash
terraform import coolify_environment.example 87654321-4321-4321-4321-210987654321
```

## Update Limitations

⚠️ **Important**: The Coolify API does not support updating environments after they are created. This means:

- Changes to `name` or `project_id` will force replacement of the environment
- The environment will be destroyed and recreated with new values
- Any applications or services deployed to the environment will also be affected
- Plan your environment structure carefully before applying

## Notes

- Environment names must be unique within their parent project
- Environments cannot be moved between projects after creation
- Deleting an environment will also delete all associated applications and services
- Common environment names include: `development`, `staging`, `production`, `testing`
- Consider using consistent naming conventions across your projects